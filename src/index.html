<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title></title>
    <link rel="stylesheet" href="css/index.css"/>
    <link rel="stylesheet" href="css/settings.css"/>
    <link rel="stylesheet" href="css/changelog.css"/>
</head>

<body>
<div class="title-bar">
    <div class="window-controls">
        <button class="window-reload-btn" id="reload-btn">
            <svg
                    width="18"
                    height="18"
                    viewBox="-6 -6 28 28"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        d="M8.16792 1.3057V0.487293C8.16792 0.104208 7.73756 -0.12216 7.39686 0.0693822L4.52778 1.75844C4.20501 1.94998 4.20501 2.40272 4.52778 2.59426L7.39686 4.28332C7.73756 4.47486 8.16792 4.24849 8.16792 3.86541V2.92511C11.037 3.09924 13.3143 5.39774 13.3143 8.23605C13.3143 9.48979 12.866 10.6913 12.0412 11.649C11.9336 11.7709 11.9515 11.945 12.0591 12.0495L12.866 12.7808C12.9916 12.8853 13.1888 12.8853 13.2964 12.7634C14.4082 11.5097 14.9999 9.9077 14.9999 8.23605C15.0178 4.50968 11.9874 1.47983 8.16792 1.3057Z"
                        fill="white"
                ></path>
                <path
                        d="M7.5904 12.8479C7.25027 12.6567 6.82062 12.8827 6.82062 13.2653V14.2043C3.95632 14.0304 1.68278 11.735 1.68278 8.90054C1.68278 7.64851 2.13033 6.44864 2.95381 5.49222C3.06122 5.37049 3.04332 5.1966 2.93591 5.09226L2.13033 4.36191C2.00501 4.25757 1.80809 4.25757 1.70068 4.3793C0.590763 5.63134 0 7.23116 0 8.90054C0 12.6393 3.04332 15.665 6.83852 15.8389V16.6562C6.83852 17.0388 7.26817 17.2648 7.60831 17.0736L10.4726 15.3868C10.7948 15.1955 10.7948 14.7434 10.4726 14.5521L7.5904 12.8479Z"
                        fill="white"
                ></path>
            </svg>
        </button>

        <button class="window-close-btn" id="close-btn">
            <svg
                    width="16"
                    height="16"
                    viewBox="-7 -7 30 30"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M0.928925 0.928941C1.31945 0.538416 1.95261 0.538416 2.34314 0.928941L8 6.5858L13.6569 0.928941C14.0474 0.538416 14.6806 0.538416 15.0711 0.928941C15.4616 1.31947 15.4616 1.95263 15.0711 2.34315L9.41421 8.00001L15.0711 13.6569C15.4616 14.0474 15.4616 14.6806 15.0711 15.0711C14.6805 15.4616 14.0474 15.4616 13.6568 15.0711L8 9.41423L2.34315 15.0711C1.95263 15.4616 1.31946 15.4616 0.928938 15.0711C0.538414 14.6806 0.538414 14.0474 0.928938 13.6569L6.58579 8.00001L0.928925 2.34315C0.538401 1.95263 0.538401 1.31946 0.928925 0.928941Z"
                        fill="white"
                ></path>
            </svg>
        </button>
    </div>
</div>

<div class="LauncherContainer">
    <div class="ActionBar">
        <div class="MainIcon">
            <img
                    src="./Resources/android-chrome-192x192.png"
                    draggable="false"
                    alt="Icon"
            />
        </div>
        <ul class="MenuItems">
            <li class="active">
                <button id="homeButton">
                    <svg
                            width="24"
                            height="24"
                            viewBox="0 0 18 16"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                                d="M4 2C4 0.895431 4.89543 0 6 0H12C13.1046 0 14 0.895431 14 2V14C14 15.1046 13.1046 16 12 16H6C4.89543 16 4 15.1046 4 14V2Z"
                        />
                        <path
                                d="M0 5C0 3.89543 0.895431 3 2 3H3V13H2C0.895431 13 0 12.1046 0 11V5Z"
                        />
                        <path
                                d="M18 5C18 3.89543 17.1046 3 16 3H15V13H16C17.1046 13 18 12.1046 18 11V5Z"
                        />
                    </svg>
                </button>
            </li>
            <li>
                <button id="settingsButton">
                    <svg
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M11.0779 2.25C10.1613 2.25 9.37909 2.91265 9.22841 3.81675L9.04974 4.88873C9.02959 5.00964 8.93542 5.1498 8.75311 5.23747C8.40905 5.40292 8.07967 5.5938 7.7674 5.8076C7.60091 5.92159 7.43259 5.9332 7.31769 5.89015L6.29851 5.50833C5.44019 5.18678 4.4752 5.53289 4.01692 6.32666L3.09493 7.92358C2.63665 8.71736 2.8194 9.72611 3.52704 10.3087L4.36756 11.0006C4.46219 11.0785 4.53629 11.2298 4.52119 11.4307C4.50706 11.6188 4.49988 11.8086 4.49988 12C4.49988 12.1915 4.50707 12.3814 4.52121 12.5695C4.53632 12.7704 4.46221 12.9217 4.36758 12.9996L3.52704 13.6916C2.8194 14.2741 2.63665 15.2829 3.09493 16.0767L4.01692 17.6736C4.4752 18.4674 5.44019 18.8135 6.29851 18.4919L7.31791 18.11C7.43281 18.067 7.60113 18.0786 7.76761 18.1925C8.07982 18.4063 8.40913 18.5971 8.75311 18.7625C8.93542 18.8502 9.02959 18.9904 9.04974 19.1113L9.22841 20.1832C9.37909 21.0874 10.1613 21.75 11.0779 21.75H12.9219C13.8384 21.75 14.6207 21.0874 14.7713 20.1832L14.95 19.1113C14.9702 18.9904 15.0643 18.8502 15.2466 18.7625C15.5907 18.5971 15.9201 18.4062 16.2324 18.1924C16.3988 18.0784 16.5672 18.0668 16.6821 18.1098L17.7012 18.4917C18.5596 18.8132 19.5246 18.4671 19.9828 17.6733L20.9048 16.0764C21.3631 15.2826 21.1804 14.2739 20.4727 13.6913L19.6322 12.9994C19.5376 12.9215 19.4635 12.7702 19.4786 12.5693C19.4927 12.3812 19.4999 12.1914 19.4999 12C19.4999 11.8085 19.4927 11.6186 19.4785 11.4305C19.4634 11.2296 19.5375 11.0783 19.6322 11.0004L20.4727 10.3084C21.1804 9.72587 21.3631 8.71711 20.9048 7.92334L19.9828 6.32642C19.5246 5.53264 18.5596 5.18654 17.7012 5.50809L16.6818 5.89C16.5669 5.93304 16.3986 5.92144 16.2321 5.80746C15.9199 5.59371 15.5906 5.40289 15.2466 5.23747C15.0643 5.1498 14.9702 5.00964 14.95 4.88873L14.7713 3.81675C14.6207 2.91265 13.8384 2.25 12.9219 2.25H11.0779ZM12 15.75C14.0711 15.75 15.75 14.0711 15.75 12C15.75 9.92893 14.0711 8.25 12 8.25C9.92893 8.25 8.25 9.92893 8.25 12C8.25 14.0711 9.92893 15.75 12 15.75Z"
                        />
                    </svg>
                </button>
            </li>
            <!-- <li>
              <button id="consoleButton">
                <svg
                  width="19"
                  height="18"
                  viewBox="0 0 19 18"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M0 3C0 1.34315 1.30871 0 2.92308 0H16.0769C17.6913 0 19 1.34315 19 3V15C19 16.6569 17.6913 18 16.0769 18H2.92308C1.30871 18 0 16.6569 0 15V3ZM3.86788 3.96967C4.15327 3.67678 4.61596 3.67678 4.90135 3.96967L7.09366 6.21967C7.37904 6.51256 7.37904 6.98744 7.09366 7.28033L4.90135 9.53033C4.61596 9.82322 4.15327 9.82322 3.86788 9.53033C3.5825 9.23744 3.5825 8.76256 3.86788 8.46967L5.54346 6.75L3.86788 5.03033C3.5825 4.73744 3.5825 4.26256 3.86788 3.96967ZM8.03846 8.25C7.63487 8.25 7.30769 8.58579 7.30769 9C7.30769 9.41421 7.63487 9.75 8.03846 9.75H10.9615C11.3651 9.75 11.6923 9.41421 11.6923 9C11.6923 8.58579 11.3651 8.25 10.9615 8.25H8.03846Z"
                  />
                </svg>
              </button>
            </li> -->
            <li>
                <button id="changelogButton">
                    <svg
                            width="18"
                            height="18"
                            viewBox="0 0 18 18"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                                d="M9 18C13.9705 18 18 13.9705 18 9C18 4.02939 13.9705 0 9 0C4.02949 0 0 4.02939 0 9C0 13.9705 4.02949 18 9 18ZM7.5 4.5C7.5 3.67157 8.17157 3 9 3V3C9.82843 3 10.5 3.67157 10.5 4.5V4.5C10.5 5.32843 9.82843 6 9 6V6C8.17157 6 7.5 5.32843 7.5 4.5V4.5ZM7.5 9C7.5 8.17157 8.17157 7.5 9 7.5V7.5C9.82843 7.5 10.5 8.17157 10.5 9V13.5C10.5 14.3284 9.82843 15 9 15V15C8.17157 15 7.5 14.3284 7.5 13.5V9Z"
                        />
                    </svg>
                </button>
            </li>
            <!-- <li>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M4.125 3C3.08947 3 2.25 3.83947 2.25 4.875V18C2.25 19.6569 3.59315 21 5.25 21H20.25C18.5931 21 17.25 19.6569 17.25 18V4.875C17.25 3.83947 16.4105 3 15.375 3H4.125ZM12 9.75C11.5858 9.75 11.25 10.0858 11.25 10.5C11.25 10.9142 11.5858 11.25 12 11.25H13.5C13.9142 11.25 14.25 10.9142 14.25 10.5C14.25 10.0858 13.9142 9.75 13.5 9.75H12ZM11.25 7.5C11.25 7.08579 11.5858 6.75 12 6.75H13.5C13.9142 6.75 14.25 7.08579 14.25 7.5C14.25 7.91421 13.9142 8.25 13.5 8.25H12C11.5858 8.25 11.25 7.91421 11.25 7.5ZM6 12.75C5.58579 12.75 5.25 13.0858 5.25 13.5C5.25 13.9142 5.58579 14.25 6 14.25H13.5C13.9142 14.25 14.25 13.9142 14.25 13.5C14.25 13.0858 13.9142 12.75 13.5 12.75H6ZM5.25 16.5C5.25 16.0858 5.58579 15.75 6 15.75H13.5C13.9142 15.75 14.25 16.0858 14.25 16.5C14.25 16.9142 13.9142 17.25 13.5 17.25H6C5.58579 17.25 5.25 16.9142 5.25 16.5ZM6 6.75C5.58579 6.75 5.25 7.08579 5.25 7.5V10.5C5.25 10.9142 5.58579 11.25 6 11.25H9C9.41421 11.25 9.75 10.9142 9.75 10.5V7.5C9.75 7.08579 9.41421 6.75 9 6.75H6Z"
                fill="#DEDEDE" />
              <path
                d="M18.75 6.75H20.625C21.2463 6.75 21.75 7.25368 21.75 7.875V18C21.75 18.8284 21.0784 19.5 20.25 19.5C19.4216 19.5 18.75 18.8284 18.75 18V6.75Z"
                fill="#DEDEDE" />
            </svg>
          </li>
          <li>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M2.25 12C2.25 6.61522 6.61522 2.25 12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12ZM13.6277 8.08328C12.7389 7.30557 11.2616 7.30557 10.3728 8.08328C10.0611 8.35604 9.58723 8.32445 9.31447 8.01272C9.04171 7.701 9.0733 7.22717 9.38503 6.95441C10.8394 5.68186 13.1611 5.68186 14.6154 6.95441C16.1285 8.27835 16.1285 10.4717 14.6154 11.7956C14.3588 12.0202 14.0761 12.2041 13.778 12.3484C13.1018 12.6756 12.7502 13.1222 12.7502 13.5V14.25C12.7502 14.6642 12.4144 15 12.0002 15C11.586 15 11.2502 14.6642 11.2502 14.25V13.5C11.2502 12.221 12.3095 11.3926 13.1246 10.9982C13.3073 10.9098 13.4765 10.799 13.6277 10.6667C14.4577 9.9404 14.4577 8.80959 13.6277 8.08328ZM12 18C12.4142 18 12.75 17.6642 12.75 17.25C12.75 16.8358 12.4142 16.5 12 16.5C11.5858 16.5 11.25 16.8358 11.25 17.25C11.25 17.6642 11.5858 18 12 18Z"
                fill="#DEDEDE" />
            </svg>
          </li>
          <li>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M8.25 6.75C8.25 4.67893 9.92893 3 12 3C14.0711 3 15.75 4.67893 15.75 6.75C15.75 8.82107 14.0711 10.5 12 10.5C9.92893 10.5 8.25 8.82107 8.25 6.75Z"
                fill="#DEDEDE" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M15.75 9.75C15.75 8.09315 17.0931 6.75 18.75 6.75C20.4069 6.75 21.75 8.09315 21.75 9.75C21.75 11.4069 20.4069 12.75 18.75 12.75C17.0931 12.75 15.75 11.4069 15.75 9.75Z"
                fill="#DEDEDE" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M2.25 9.75C2.25 8.09315 3.59315 6.75 5.25 6.75C6.90685 6.75 8.25 8.09315 8.25 9.75C8.25 11.4069 6.90685 12.75 5.25 12.75C3.59315 12.75 2.25 11.4069 2.25 9.75Z"
                fill="#DEDEDE" />
              <path fill-rule="evenodd" clip-rule="evenodd"
                d="M6.30986 15.1175C7.50783 13.2444 9.60835 12 12 12C14.3919 12 16.4927 13.2447 17.6906 15.1182C18.5187 16.4134 18.877 17.9752 18.709 19.4979C18.6827 19.7359 18.5444 19.947 18.3368 20.0662C16.4694 21.1376 14.3051 21.75 12 21.75C9.69492 21.75 7.53059 21.1376 5.66325 20.0662C5.45559 19.947 5.3173 19.7359 5.29103 19.4979C5.12293 17.9749 5.48141 16.4129 6.30986 15.1175Z"
                fill="#DEDEDE" />
              <path
                d="M5.08228 14.2537C5.07024 14.2722 5.05827 14.2907 5.04638 14.3093C4.08091 15.8189 3.63908 17.6167 3.77471 19.389C3.16667 19.2967 2.5767 19.1481 2.01043 18.9487L1.89547 18.9082C1.68576 18.8343 1.53923 18.6439 1.52159 18.4222L1.51192 18.3007C1.50402 18.2014 1.5 18.1011 1.5 18C1.5 15.9851 3.08905 14.3414 5.08228 14.2537Z"
                fill="#DEDEDE" />
              <path
                d="M20.2256 19.389C20.3612 17.617 19.9196 15.8196 18.9545 14.3102C18.9424 14.2913 18.9303 14.2725 18.9181 14.2537C20.9111 14.3416 22.5 15.9853 22.5 18C22.5 18.1011 22.496 18.2014 22.4881 18.3007L22.4784 18.4222C22.4608 18.6439 22.3142 18.8343 22.1045 18.9082L21.9896 18.9487C21.4234 19.1481 20.8336 19.2966 20.2256 19.389Z"
                fill="#DEDEDE" />
            </svg>
          </li> -->
        </ul>
    </div>
    <div class="RightPanel">
        <div class="LauncherInfo">
            <div id="message">Status message...</div>
            <div id="launcher-version-status-and-number">
                <span id="launcher-version-number"></span>
                <!-- This will be replaced dynamically -->
                <div id="launcher-version-status"></div>
            </div>
        </div>
        <div class="ContentArea" id="contentArea">
            <div id="game-cards-container">
                <div class="game-banner">
                    <div class="card loading">
                        <div class="image"></div>
                        <div class="content">
                            <h1></h1>
                            <h2></h2>
                        </div>
                    </div>
                </div>

                <div class="game-banner">
                    <div class="card loading">
                        <div class="image"></div>
                        <div class="content">
                            <h1></h1>
                            <h2></h2>
                        </div>
                    </div>
                </div>

                <div class="game-banner">
                    <div class="card loading">
                        <div class="image"></div>
                        <div class="content">
                            <h1></h1>
                            <h2></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Toaster Notification -->
<div id="toaster-container"></div>

<script src="./js/renderer.js"></script>
<script src="./js/settings.js"></script>
<script src="./js/changelog.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        window.electronAPI.onNotification((data) => {
            console.log("Notification received in renderer:", data);
            createToaster(data.title, data.body, data.gameId); // Create a new toaster for each notification
        });
    });

    let toasterCount = 0;

    function createToaster(title, body, gameId) {
        toasterCount += 1;
        const toasterId = `toaster-${toasterCount}`;

        // Create toaster element
        const toaster = document.createElement("div");
        toaster.classList.add("toaster-notification", "show");
        toaster.setAttribute("id", toasterId);

        const content = `
          <div class="toaster-content">
            <div style="margin: 12px 0 12px 16px;">
              <strong>${title}</strong><br />
              <p>${body}</p>
            </div>
            <button class="toaster-button" id="toaster-download-${toasterCount}" data-game-id="${gameId}">UPDATE</button>
          </div>`;

        toaster.innerHTML = content;

        // Append toaster to the container
        document.getElementById("toaster-container").appendChild(toaster);

        // Automatically hide toaster after 10 seconds
        setTimeout(() => {
            hideToaster(toasterId);
        }, 60000);

        // Add event listener to download button
        document
            .getElementById(`toaster-download-${toasterCount}`)
            .addEventListener("click", (event) => {
                const gameId = event.target.dataset.gameId;
                window.electronAPI.downloadGame(gameId);
                hideToaster(toasterId);
            });

        updateToasterPositions();
    }

    function hideToaster(toasterId) {
        const toaster = document.getElementById(toasterId);
        if (toaster) {
            // Move the toaster to the right (off-screen)
            toaster.style.right = "-600px"; // Adjust this value if needed for smooth sliding

            // Wait for the transition to complete before removing the element
            setTimeout(() => {
                toaster.remove();
                updateToasterPositions(); // Update positions after a toaster is removed
            }, 1000); // Match the CSS transition duration
        }
    }

    function updateToasterPositions() {
        const toasters = document.querySelectorAll(".toaster-notification");
        toasters.forEach((toaster, index) => {
            const bottomOffset = 20 + index * 75; // Adjust bottom position for stacking
            toaster.style.bottom = `${bottomOffset}px`;
        });
    }
</script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const buttons = document.querySelectorAll(".MenuItems li button");

        console.log(buttons.length + " buttons found"); // Check if buttons are correctly selected

        buttons.forEach((button) => {
            button.addEventListener("click", function () {
                console.log("Button clicked"); // Confirm click is detected

                // Remove 'active' class from all list items
                buttons.forEach((btn) => {
                    btn.parentElement.classList.remove("active");
                    console.log("Active class removed"); // Check removal
                });

                // Add 'active' class to the parent 'li' of the clicked button
                this.parentElement.classList.add("active");
                console.log("Active class added to", this.id); // Check addition
            });
        });
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const closeButton = document.getElementById("close-btn");
        closeButton.addEventListener("click", closeWindow);
    });
    document.addEventListener("DOMContentLoaded", () => {
        const closeButton = document.getElementById("reload-btn");
        closeButton.addEventListener("click", reloadWindow);
    });
</script>
</body>
</html>
